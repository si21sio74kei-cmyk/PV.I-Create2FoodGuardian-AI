<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodGuardian AI | Smart Food Waste Reduction</title>
    <style>
        :root {
            --warm-orange: #FF8C42;
            --soft-yellow: #FFD166;
            --fresh-green: #06D6A0;
            --cream-white: #FFF9F0;
            --warm-brown: #8B5A2B;
            --light-orange: #FFB347;
        }
        
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body {
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: var(--warm-brown);
            background: linear-gradient(135deg, #fff9f0 0%, #ffe8d6 100%);
            min-height: 100vh;
        }
        
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 0 20px; 
        }
        
        /* å¯¼èˆªæ  */
        header {
            background: linear-gradient(135deg, var(--warm-orange) 0%, var(--light-orange) 100%);
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        
        .team-name {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-weight: bold;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        /* è¯­è¨€åˆ‡æ¢æŒ‰é’® */
        .language-switcher {
            position: relative;
        }
        
        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            font-weight: bold;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .lang-options {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 0.5rem 0;
            min-width: 120px;
            display: none;
            z-index: 1000;
        }
        
        .lang-option {
            padding: 0.5rem 1rem;
            cursor: pointer;
            color: var(--warm-brown);
        }
        
        .lang-option:hover {
            background: #f5f5f5;
        }
        
        .lang-options.show {
            display: block;
        }
        
        /* æ¬¢è¿ç•Œé¢ */
        .welcome-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }
        
        .welcome-card {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 30px rgba(255, 140, 66, 0.1);
            border: 1px solid rgba(255, 140, 66, 0.1);
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        
        .welcome-card h1 {
            color: var(--warm-orange);
            margin-bottom: 1rem;
        }
        
        /* é¡µé¢åˆ‡æ¢æŒ‰é’® */
        .page-switcher {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 2rem 0;
        }
        
        .page-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--fresh-green) 0%, #06C290 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(6, 214, 160, 0.3);
            font-size: 1.1rem;
        }
        
        .page-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(6, 214, 160, 0.4);
        }
        
        .page-btn.secondary {
            background: linear-gradient(135deg, var(--warm-orange) 0%, var(--light-orange) 100%);
        }
        
        /* é¡µé¢å†…å®¹ */
        .page {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .page.active {
            display: block;
        }
        
        /* è‹±é›„åŒºåŸŸ */
        .hero {
            text-align: center;
            padding: 3rem 0 2rem;
            color: var(--warm-brown);
        }
        
        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            color: var(--warm-orange);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 2rem;
        }
        
        /* å¡ç‰‡ */
        .card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(255, 140, 66, 0.1);
            border: 1px solid rgba(255, 140, 66, 0.1);
        }
        
        /* è¡¨å•å…ƒç´  */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--soft-yellow);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--fresh-green);
            box-shadow: 0 0 0 3px rgba(6, 214, 160, 0.1);
        }
        
        /* æ»‘åŠ¨æ¡ */
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: linear-gradient(to right, var(--soft-yellow), var(--warm-orange));
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: var(--fresh-green);
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .slider-value {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--warm-orange);
            margin-top: 0.5rem;
        }
        
        /* æŒ‰é’® */
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--fresh-green) 0%, #06C290 100%);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(6, 214, 160, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(6, 214, 160, 0.4);
        }
        
        /* ç»“æœå±•ç¤º */
        .result-card {
            background: linear-gradient(135deg, #fff9f0 0%, #fff0e0 100%);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-left: 5px solid var(--fresh-green);
        }
        
        .ingredient-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px dashed rgba(139, 90, 43, 0.1);
        }
        
        /* æ’è¡Œæ¦œæ ·å¼ */
        .leaderboard {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .leaderboard-item:last-child {
            border-bottom: none;
        }
        
        .rank {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--fresh-green);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .rank-1 { background: #FFD700; }
        .rank-2 { background: #C0C0C0; }
        .rank-3 { background: #CD7F32; }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-weight: bold;
        }
        
        .waste-amount {
            color: var(--fresh-green);
            font-weight: bold;
        }
        
        .timestamp {
            font-size: 0.8rem;
            color: #999;
        }
        
        /* ç¯ä¿å½±å“ç½‘æ ¼ */
        .impact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .impact-item {
            text-align: center;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        
        .impact-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--fresh-green);
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.2rem; }
            .container { padding: 0 15px; }
            .page-switcher { flex-direction: column; }
            .impact-grid { grid-template-columns: 1fr; }
            .welcome-card { padding: 2rem 1.5rem; }
        }
        
        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 140, 66, 0.2);
            border-top: 4px solid var(--warm-orange);
            border-radius: 50%;
            margin: 0 auto;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* å¨ä½™åˆ©ç”¨å»ºè®® */
        .food-waste-tips {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .tip-item {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .tip-item:before {
            content: "ğŸ’¡";
            position: absolute;
            left: 0;
        }
        
        /* é¡µè„š */
        footer {
            text-align: center;
            padding: 2rem 0;
            color: #666;
            border-top: 1px solid #eee;
            margin-top: 3rem;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <header>
        <nav class="container">
            <div class="logo-section">
                <div class="logo">ğŸ FoodGuardian AI</div>
                <div class="team-name">CMMMMC | I-Create2</div>
            </div>
            
            <!-- è¯­è¨€åˆ‡æ¢æŒ‰é’® -->
            <div class="language-switcher">
                <button class="lang-btn" id="languageBtn">
                    <span id="currentLangText">ä¸­æ–‡</span> â–¼
                </button>
                <div class="lang-options" id="langOptions">
                    <div class="lang-option" data-lang="zh">ä¸­æ–‡</div>
                    <div class="lang-option" data-lang="en">English</div>
                </div>
            </div>
        </nav>
    </header>

    <!-- æ¬¢è¿ç•Œé¢ -->
    <div id="welcome" class="welcome-container">
        <div class="welcome-card fade-in">
            <h1 id="welcomeTitle">æ¬¢è¿ä½¿ç”¨ FoodGuardian AI</h1>
            <p id="welcomeSubtitle">è¯·è¾“å…¥æ‚¨çš„æ˜µç§°ï¼ŒåŠ å…¥æˆ‘ä»¬çš„é˜²æµªè´¹è¡ŒåŠ¨</p>
            
            <div class="form-group" style="margin-top: 2rem;">
                <label id="usernameLabel">æ‚¨çš„æ˜µç§°ï¼ˆç”¨äºæ’è¡Œæ¦œï¼‰</label>
                <input type="text" id="usernameInput" placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°" style="text-align: center;">
                <p id="usernameHint" style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">æ˜µç§°å°†æ˜¾ç¤ºåœ¨æ’è¡Œæ¦œä¸­</p>
            </div>
            
            <button onclick="registerUser()" class="btn" id="enterBtn" style="width: 100%; margin-top: 1.5rem;">è¿›å…¥ç½‘ç«™</button>
            
            <div class="result-card" style="margin-top: 2rem;">
                <h3 id="howToTitle">å¦‚ä½•å‚ä¸ï¼Ÿ</h3>
                <p id="howToStep1">1. è¾“å…¥æ‚¨çš„æ˜µç§°</p>
                <p id="howToStep2">2. ä½¿ç”¨æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨</p>
                <p id="howToStep3">3. ç³»ç»Ÿè®¡ç®—æ‚¨å‡å°‘çš„æµªè´¹é‡</p>
                <p id="howToStep4">4. åœ¨æ’è¡Œæ¦œä¸­æŸ¥çœ‹æ‚¨çš„æ’å</p>
            </div>
        </div>
    </div>

    <!-- ä¸»ç½‘ç«™å†…å®¹ -->
    <div id="mainContent" style="display: none;">
        <!-- é¡µé¢åˆ‡æ¢æŒ‰é’® -->
        <div class="container page-switcher">
            <button class="page-btn" data-page="generator" id="generatorBtn">æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨</button>
            <button class="page-btn secondary" data-page="leaderboard" id="leaderboardBtn">æŸ¥çœ‹æ’è¡Œæ¦œ</button>
        </div>

        <!-- ç¬¬ä¸€é¡µï¼šæ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨ -->
        <div id="generator" class="page active">
            <section class="hero">
                <div class="container">
                    <h1 id="heroTitle">æ™ºèƒ½é£Ÿç‰©æµªè´¹å‡å°‘</h1>
                    <p id="heroSubtitle">AIé©±åŠ¨çš„é£Ÿè°±è®¡ç®—å™¨ï¼Œé€šè¿‡ç²¾å‡†ä»½é‡é˜²æ­¢æµªè´¹</p>
                </div>
            </section>

            <section class="container">
                <div class="card fade-in">
                    <h2 id="generatorTitle">æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨</h2>
                    
                    <div class="form-group">
                        <label id="currentUserLabel">å½“å‰ç”¨æˆ·ï¼š<span id="currentUser" style="color: var(--warm-orange); font-weight: bold;"></span></label>
                    </div>
                    
                    <div class="form-group">
                        <label id="peopleLabel">ç”¨é¤äººæ•°</label>
                        <input type="range" min="1" max="20" value="4" class="slider" id="peopleSlider">
                        <div class="slider-value"><span id="peopleValue">4</span> <span id="peopleUnit">äºº</span></div>
                    </div>
                    
                    <div class="form-group">
                        <label id="mealTypeLabel">ç”¨é¤ç±»å‹</label>
                        <select id="mealType">
                            <option value="homecooking">å®¶å¸¸èœ</option>
                            <option value="healthy">å¥åº·å‡è„‚é¤</option>
                            <option value="vegetarian">ç´ é£Ÿ</option>
                            <option value="feast">å®´å®¢èœ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label id="ingredientLabel">ä¸»è¦é£Ÿæ</label>
                        <select id="ingredientSelect">
                            <option value="tomato">ç•ªèŒ„</option>
                            <option value="chicken">é¸¡èƒ¸è‚‰</option>
                            <option value="potato">åœŸè±†</option>
                            <option value="egg">é¸¡è›‹</option>
                            <option value="beef">ç‰›è‚‰</option>
                            <option value="fish">é±¼</option>
                        </select>
                    </div>
                    
                    <button onclick="generateRecipe()" class="btn" id="generateBtn" style="width: 100%;">ç”Ÿæˆæ™ºèƒ½é£Ÿè°±</button>
                    
                    <div id="recipeResult">
                        <p id="recipePlaceholder" style="text-align: center; color: #666;">å¡«å†™ä»¥ä¸Šä¿¡æ¯ï¼Œç‚¹å‡»ç”Ÿæˆè·å¾—ä¸ªæ€§åŒ–é£Ÿè°±</p>
                    </div>
                </div>
                
                <!-- ç¯ä¿å½±å“ -->
                <div class="card fade-in">
                    <h2 id="impactTitle">ç¯ä¿å½±å“</h2>
                    <p id="impactSubtitle">æ ¹æ®æ‚¨çš„é£Ÿè°±é€‰æ‹©ï¼Œæ‚¨æ­£åœ¨å‡å°‘ï¼š</p>
                    
                    <div class="impact-grid">
                        <div class="impact-item">
                            <div class="impact-value" id="savedFood">0g</div>
                            <div id="foodWasteLabel">é£Ÿç‰©æµªè´¹</div>
                        </div>
                        <div class="impact-item">
                            <div class="impact-value" id="savedWater">0L</div>
                            <div id="waterLabel">æ°´èµ„æº</div>
                        </div>
                        <div class="impact-item">
                            <div class="impact-value" id="savedCO2">0g</div>
                            <div id="co2Label">ç¢³æ’æ”¾</div>
                        </div>
                        <div class="impact-item">
                            <div class="impact-value" id="savedMoney">Â¥0</div>
                            <div id="moneyLabel">èŠ‚çº¦èµ„é‡‘</div>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <p id="impactNote">è¿™äº›æ•°å€¼æ ¹æ®æ‰€é€‰äººæ•°å’Œé£Ÿæå®æ—¶è®¡ç®—ã€‚</p>
                    </div>
                </div>
                
                <!-- å¨ä½™åˆ©ç”¨å»ºè®® -->
                <div class="card fade-in">
                    <h2 id="tipsTitle">å¨ä½™åˆ©ç”¨å»ºè®®</h2>
                    <p id="tipsSubtitle">é£Ÿç‰©è¾¹è§’æ–™çš„åˆ›æ„ä½¿ç”¨æ–¹æ³•</p>
                    
                    <div class="food-waste-tips">
                        <div class="tip-item">
                            <strong id="tip1Title">è”¬èœåºŸæ–™</strong>
                            <p id="tip1Text">ä¿å­˜æ´‹è‘±çš®ã€èƒ¡èåœçš®å’ŒèŠ¹èœæ ¹ï¼Œåˆ¶ä½œç¾å‘³çš„è”¬èœé«˜æ±¤ã€‚å°†åºŸæ–™æ”¾å…¥é”…ä¸­ï¼ŒåŠ æ°´ç…®æ²¸ï¼Œå°ç«ç‚–ç…®30åˆ†é’Ÿï¼Œè¿‡æ»¤åå³å¯å¾—åˆ°è¥å…»ä¸°å¯Œçš„é«˜æ±¤ã€‚</p>
                        </div>
                        
                        <div class="tip-item">
                            <strong id="tip2Title">é™ˆæ—§é¢åŒ…</strong>
                            <p id="tip2Text">å°†é™ˆæ—§é¢åŒ…å˜æˆé¢åŒ…ä¸ã€é¢åŒ…å±‘æˆ–ç¾å‘³çš„é¢åŒ…å¸ƒä¸ã€‚åˆ‡ç‰‡çƒ˜çƒ¤æˆé¢åŒ…ä¸ï¼Œæˆ–æ…ç¢æˆé¢åŒ…å±‘ç”¨äºçƒ¹é¥ªï¼Œä¹Ÿå¯ä¸é¸¡è›‹ã€ç‰›å¥¶æ··åˆåˆ¶ä½œé¢åŒ…å¸ƒä¸ã€‚</p>
                        </div>
                        
                        <div class="tip-item">
                            <strong id="tip3Title">å’–å•¡æ¸£</strong>
                            <p id="tip3Text">ç”¨ä½œå–œé…¸æ¤ç‰©çš„å¤©ç„¶è‚¥æ–™æˆ–æ¸©å’Œçš„ç ”ç£¨æ¸…æ´å‰‚ã€‚å’–å•¡æ¸£å¯Œå«æ°®ã€ç£·ã€é’¾ï¼Œå¯ä¸ºæ¤ç‰©æä¾›å…»åˆ†ï¼Œä¹Ÿå¯ç”¨äºæ¸…æ´æ²¹è…»çš„é”…å…·ã€‚</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ç¬¬äºŒé¡µï¼šæ’è¡Œæ¦œ -->
        <div id="leaderboard" class="page">
            <section class="hero">
                <div class="container">
                    <h1 id="leaderboardTitle">å‡å°‘æµªè´¹æ’è¡Œæ¦œ</h1>
                    <p id="leaderboardSubtitle">æ’åå‰6çš„ç”¨æˆ·ï¼ˆæµªè´¹æœ€å°‘æ’åç¬¬ä¸€ï¼‰</p>
                </div>
            </section>

            <section class="container">
                <div class="card fade-in">
                    <h2 id="leaderboardTitle2">æ’è¡Œæ¦œ</h2>
                    <p id="leaderboardDescription">ä½¿ç”¨æœ¬ç½‘ç«™ç”Ÿæˆé£Ÿè°±çš„ç”¨æˆ·ï¼ŒæŒ‰ç…§å‡å°‘çš„æµªè´¹é‡ä»å°‘åˆ°å¤šæ’å</p>
                    
                    <div class="leaderboard" id="leaderboardList">
                        <!-- æ’è¡Œæ¦œå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    
                    <div class="result-card">
                        <h3 id="yourRankTitle">æ‚¨çš„æ’å</h3>
                        <p id="yourRankText">ç”Ÿæˆé£Ÿè°±åæŸ¥çœ‹æ‚¨çš„æ’å</p>
                    </div>
                </div>
                
                <div class="card fade-in">
                    <h2 id="howToJoinTitle">å¦‚ä½•å‚ä¸æ’åï¼Ÿ</h2>
                    <p id="howToStep1">1. åœ¨"æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨"é¡µé¢è¾“å…¥æ‚¨çš„æ˜µç§°</p>
                    <p id="howToStep2">2. é€‰æ‹©ç”¨é¤äººæ•°ã€ç±»å‹å’Œé£Ÿæ</p>
                    <p id="howToStep3">3. ç‚¹å‡»"ç”Ÿæˆæ™ºèƒ½é£Ÿè°±"æŒ‰é’®</p>
                    <p id="howToStep4">4. ç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—æ‚¨å‡å°‘çš„æµªè´¹é‡å¹¶æ·»åŠ åˆ°æ’è¡Œæ¦œ</p>
                    <p id="howToStep5">5. æµªè´¹è¶Šå°‘çš„ç”¨æˆ·æ’åè¶Šé å‰</p>
                </div>
            </section>
        </div>

        <footer class="container">
            <p id="footerText">FoodGuardian AI | BIEA 2026 STEMç«èµ›é¡¹ç›® | å›¢é˜Ÿ CMMMMC | é˜Ÿä¼ I-Create2</p>
        </footer>
    </div>

    <script>
        // å¤šè¯­è¨€æ”¯æŒ
        const translations = {
            zh: {
                // å¯¼èˆªæ 
                currentLangText: "ä¸­æ–‡",
                
                // æ¬¢è¿ç•Œé¢
                welcomeTitle: "æ¬¢è¿ä½¿ç”¨ FoodGuardian AI",
                welcomeSubtitle: "è¯·è¾“å…¥æ‚¨çš„æ˜µç§°ï¼ŒåŠ å…¥æˆ‘ä»¬çš„é˜²æµªè´¹è¡ŒåŠ¨",
                usernameLabel: "æ‚¨çš„æ˜µç§°ï¼ˆç”¨äºæ’è¡Œæ¦œï¼‰",
                usernameHint: "æ˜µç§°å°†æ˜¾ç¤ºåœ¨æ’è¡Œæ¦œä¸­",
                enterBtn: "è¿›å…¥ç½‘ç«™",
                howToTitle: "å¦‚ä½•å‚ä¸ï¼Ÿ",
                howToStep1: "1. è¾“å…¥æ‚¨çš„æ˜µç§°",
                howToStep2: "2. ä½¿ç”¨æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨",
                howToStep3: "3. ç³»ç»Ÿè®¡ç®—æ‚¨å‡å°‘çš„æµªè´¹é‡",
                howToStep4: "4. åœ¨æ’è¡Œæ¦œä¸­æŸ¥çœ‹æ‚¨çš„æ’å",
                
                // é¡µé¢åˆ‡æ¢æŒ‰é’®
                generatorBtn: "æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨",
                leaderboardBtn: "æŸ¥çœ‹æ’è¡Œæ¦œ",
                
                // è‹±é›„åŒºåŸŸ
                heroTitle: "æ™ºèƒ½é£Ÿç‰©æµªè´¹å‡å°‘",
                heroSubtitle: "AIé©±åŠ¨çš„é£Ÿè°±è®¡ç®—å™¨ï¼Œé€šè¿‡ç²¾å‡†ä»½é‡é˜²æ­¢æµªè´¹",
                
                // ç”Ÿæˆå™¨é¡µé¢
                generatorTitle: "æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨",
                currentUserLabel: "å½“å‰ç”¨æˆ·ï¼š",
                peopleLabel: "ç”¨é¤äººæ•°",
                peopleUnit: "äºº",
                mealTypeLabel: "ç”¨é¤ç±»å‹",
                ingredientLabel: "ä¸»è¦é£Ÿæ",
                generateBtn: "ç”Ÿæˆæ™ºèƒ½é£Ÿè°±",
                recipePlaceholder: "å¡«å†™ä»¥ä¸Šä¿¡æ¯ï¼Œç‚¹å‡»ç”Ÿæˆè·å¾—ä¸ªæ€§åŒ–é£Ÿè°±",
                
                // ç¯ä¿å½±å“
                impactTitle: "ç¯ä¿å½±å“",
                impactSubtitle: "æ ¹æ®æ‚¨çš„é£Ÿè°±é€‰æ‹©ï¼Œæ‚¨æ­£åœ¨å‡å°‘ï¼š",
                foodWasteLabel: "é£Ÿç‰©æµªè´¹",
                waterLabel: "æ°´èµ„æº",
                co2Label: "ç¢³æ’æ”¾",
                moneyLabel: "èŠ‚çº¦èµ„é‡‘",
                impactNote: "è¿™äº›æ•°å€¼æ ¹æ®æ‰€é€‰äººæ•°å’Œé£Ÿæå®æ—¶è®¡ç®—ã€‚",
                
                // å¨ä½™å»ºè®®
                tipsTitle: "å¨ä½™åˆ©ç”¨å»ºè®®",
                tipsSubtitle: "é£Ÿç‰©è¾¹è§’æ–™çš„åˆ›æ„ä½¿ç”¨æ–¹æ³•",
                tip1Title: "è”¬èœåºŸæ–™",
                tip1Text: "ä¿å­˜æ´‹è‘±çš®ã€èƒ¡èåœçš®å’ŒèŠ¹èœæ ¹ï¼Œåˆ¶ä½œç¾å‘³çš„è”¬èœé«˜æ±¤ã€‚å°†åºŸæ–™æ”¾å…¥é”…ä¸­ï¼ŒåŠ æ°´ç…®æ²¸ï¼Œå°ç«ç‚–ç…®30åˆ†é’Ÿï¼Œè¿‡æ»¤åå³å¯å¾—åˆ°è¥å…»ä¸°å¯Œçš„é«˜æ±¤ã€‚",
                tip2Title: "é™ˆæ—§é¢åŒ…",
                tip2Text: "å°†é™ˆæ—§é¢åŒ…å˜æˆé¢åŒ…ä¸ã€é¢åŒ…å±‘æˆ–ç¾å‘³çš„é¢åŒ…å¸ƒä¸ã€‚åˆ‡ç‰‡çƒ˜çƒ¤æˆé¢åŒ…ä¸ï¼Œæˆ–æ…ç¢æˆé¢åŒ…å±‘ç”¨äºçƒ¹é¥ªï¼Œä¹Ÿå¯ä¸é¸¡è›‹ã€ç‰›å¥¶æ··åˆåˆ¶ä½œé¢åŒ…å¸ƒä¸ã€‚",
                tip3Title: "å’–å•¡æ¸£",
                tip3Text: "ç”¨ä½œå–œé…¸æ¤ç‰©çš„å¤©ç„¶è‚¥æ–™æˆ–æ¸©å’Œçš„ç ”ç£¨æ¸…æ´å‰‚ã€‚å’–å•¡æ¸£å¯Œå«æ°®ã€ç£·ã€é’¾ï¼Œå¯ä¸ºæ¤ç‰©æä¾›å…»åˆ†ï¼Œä¹Ÿå¯ç”¨äºæ¸…æ´æ²¹è…»çš„é”…å…·ã€‚",
                
                // æ’è¡Œæ¦œé¡µé¢
                leaderboardTitle: "å‡å°‘æµªè´¹æ’è¡Œæ¦œ",
                leaderboardSubtitle: "æ’åå‰6çš„ç”¨æˆ·ï¼ˆæµªè´¹æœ€å°‘æ’åç¬¬ä¸€ï¼‰",
                leaderboardTitle2: "æ’è¡Œæ¦œ",
                leaderboardDescription: "ä½¿ç”¨æœ¬ç½‘ç«™ç”Ÿæˆé£Ÿè°±çš„ç”¨æˆ·ï¼ŒæŒ‰ç…§å‡å°‘çš„æµªè´¹é‡ä»å°‘åˆ°å¤šæ’å",
                yourRankTitle: "æ‚¨çš„æ’å",
                yourRankText: "ç”Ÿæˆé£Ÿè°±åæŸ¥çœ‹æ‚¨çš„æ’å",
                howToJoinTitle: "å¦‚ä½•å‚ä¸æ’åï¼Ÿ",
                
                // é¡µè„š
                footerText: "FoodGuardian AI | BIEA 2026 STEMç«èµ›é¡¹ç›® | å›¢é˜Ÿ CMMMMC | é˜Ÿä¼ I-Create2"
            },
            en: {
                // å¯¼èˆªæ 
                currentLangText: "English",
                
                // æ¬¢è¿ç•Œé¢
                welcomeTitle: "Welcome to FoodGuardian AI",
                welcomeSubtitle: "Please enter your nickname to join our anti-waste campaign",
                usernameLabel: "Your Nickname (for leaderboard)",
                usernameHint: "Nickname will be displayed on the leaderboard",
                enterBtn: "Enter Website",
                howToTitle: "How to participate?",
                howToStep1: "1. Enter your nickname",
                howToStep2: "2. Use the Smart Recipe Generator",
                howToStep3: "3. System calculates your waste reduction",
                howToStep4: "4. Check your rank on the leaderboard",
                
                // é¡µé¢åˆ‡æ¢æŒ‰é’®
                generatorBtn: "Smart Recipe Generator",
                leaderboardBtn: "View Leaderboard",
                
                // è‹±é›„åŒºåŸŸ
                heroTitle: "Smart Food Waste Reduction",
                heroSubtitle: "AI-powered recipe calculator that prevents waste with precise portions",
                
                // ç”Ÿæˆå™¨é¡µé¢
                generatorTitle: "Smart Recipe Generator",
                currentUserLabel: "Current User: ",
                peopleLabel: "Number of People",
                peopleUnit: "people",
                mealTypeLabel: "Meal Type",
                ingredientLabel: "Main Ingredient",
                generateBtn: "Generate Smart Recipe",
                recipePlaceholder: "Fill in the information above and click generate",
                
                // ç¯ä¿å½±å“
                impactTitle: "Environmental Impact",
                impactSubtitle: "Based on your recipe selection, you're reducing:",
                foodWasteLabel: "Food Waste",
                waterLabel: "Water",
                co2Label: "COâ‚‚ Emissions",
                moneyLabel: "Money Saved",
                impactNote: "These values are calculated in real-time based on the number of people and ingredients selected.",
                
                // å¨ä½™å»ºè®®
                tipsTitle: "Food Waste Tips",
                tipsSubtitle: "Creative ways to use common food scraps",
                tip1Title: "Vegetable Scraps",
                tip1Text: "Save onion skins, carrot peels, and celery ends to make flavorful vegetable broth. Simmer scraps in water for 30 minutes, then strain for nutritious broth.",
                tip2Title: "Stale Bread",
                tip2Text: "Turn stale bread into croutons, breadcrumbs, or delicious bread pudding. Toast for croutons, process for crumbs, or mix with eggs and milk for pudding.",
                tip3Title: "Coffee Grounds",
                tip3Text: "Use as natural fertilizer for acid-loving plants or gentle abrasive cleaner. Rich in nitrogen, phosphorus, and potassium for plants, great for cleaning greasy pans.",
                
                // æ’è¡Œæ¦œé¡µé¢
                leaderboardTitle: "Waste Reduction Leaderboard",
                leaderboardSubtitle: "Top 6 users (least waste ranks first)",
                leaderboardTitle2: "Leaderboard",
                leaderboardDescription: "Users who generated recipes, ranked by waste reduction from least to most",
                yourRankTitle: "Your Rank",
                yourRankText: "Generate a recipe to see your ranking",
                howToJoinTitle: "How to join the ranking?",
                
                // é¡µè„š
                footerText: "FoodGuardian AI | BIEA 2026 STEM Competition Project | Team CMMMMC | Team I-Create2"
            }
        };

        // å½“å‰è¯­è¨€
        let currentLanguage = localStorage.getItem('foodguardian_language') || 'zh';
        
        // ç”¨æˆ·ç®¡ç†
        let currentUser = null;
        
        // æ£€æŸ¥æ˜¯å¦æœ‰å·²ç™»å½•çš„ç”¨æˆ·
        function checkUser() {
            const storedUser = localStorage.getItem('foodguardian_currentUser');
            if (storedUser) {
                currentUser = storedUser;
                showMainContent();
            }
        }
        
        // æ³¨å†Œæ–°ç”¨æˆ·
        function registerUser() {
            const usernameInput = document.getElementById('usernameInput');
            const username = usernameInput.value.trim();
            
            if (!username) {
                alert(currentLanguage === 'zh' ? 'è¯·è¾“å…¥æ‚¨çš„æ˜µç§°ï¼' : 'Please enter your nickname!');
                usernameInput.focus();
                return;
            }
            
            if (username.length < 2 || username.length > 20) {
                alert(currentLanguage === 'zh' ? 'æ˜µç§°é•¿åº¦åº”åœ¨2-20ä¸ªå­—ç¬¦ä¹‹é—´ï¼' : 'Nickname should be 2-20 characters long!');
                usernameInput.focus();
                return;
            }
            
            currentUser = username;
            localStorage.setItem('foodguardian_currentUser', currentUser);
            showMainContent();
        }
        
        // æ˜¾ç¤ºä¸»å†…å®¹
        function showMainContent() {
            document.getElementById('welcome').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('currentUser').textContent = currentUser;
            
            // åˆå§‹åŒ–ç¯ä¿è®¡ç®—
            updateEnvironmentalImpact(4, 'tomato');
            
            // åˆå§‹åŒ–æ’è¡Œæ¦œ
            updateLeaderboard();
        }
        
        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        function initializeLanguageSwitcher() {
            const langBtn = document.getElementById('languageBtn');
            const langOptions = document.getElementById('langOptions');
            const currentLangText = document.getElementById('currentLangText');
            
            // è®¾ç½®åˆå§‹è¯­è¨€
            applyLanguage(currentLanguage);
            
            // åˆ‡æ¢è¯­è¨€æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            langBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                langOptions.classList.toggle('show');
            });
            
            // è¯­è¨€é€‰é¡¹ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    currentLanguage = lang;
                    localStorage.setItem('foodguardian_language', lang);
                    applyLanguage(lang);
                    langOptions.classList.remove('show');
                });
            });
            
            // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­è¯­è¨€é€‰é¡¹
            document.addEventListener('click', function() {
                langOptions.classList.remove('show');
            });
        }
        
        // åº”ç”¨è¯­è¨€
        function applyLanguage(lang) {
            const t = translations[lang];
            
            // æ›´æ–°å¯¼èˆªæ è¯­è¨€æŒ‰é’®
            document.getElementById('currentLangText').textContent = t.currentLangText;
            
            // æ›´æ–°æ¬¢è¿ç•Œé¢
            document.getElementById('welcomeTitle').textContent = t.welcomeTitle;
            document.getElementById('welcomeSubtitle').textContent = t.welcomeSubtitle;
            document.getElementById('usernameLabel').textContent = t.usernameLabel;
            document.getElementById('usernameHint').textContent = t.usernameHint;
            document.getElementById('enterBtn').textContent = t.enterBtn;
            document.getElementById('howToTitle').textContent = t.howToTitle;
            document.getElementById('howToStep1').textContent = t.howToStep1;
            document.getElementById('howToStep2').textContent = t.howToStep2;
            document.getElementById('howToStep3').textContent = t.howToStep3;
            document.getElementById('howToStep4').textContent = t.howToStep4;
            
            // æ›´æ–°é¡µé¢åˆ‡æ¢æŒ‰é’®
            document.getElementById('generatorBtn').textContent = t.generatorBtn;
            document.getElementById('leaderboardBtn').textContent = t.leaderboardBtn;
            
            // æ›´æ–°è‹±é›„åŒºåŸŸ
            document.getElementById('heroTitle').textContent = t.heroTitle;
            document.getElementById('heroSubtitle').textContent = t.heroSubtitle;
            
            // æ›´æ–°ç”Ÿæˆå™¨é¡µé¢
            document.getElementById('generatorTitle').textContent = t.generatorTitle;
            document.getElementById('currentUserLabel').textContent = t.currentUserLabel;
            document.getElementById('peopleLabel').textContent = t.peopleLabel;
            document.getElementById('peopleUnit').textContent = t.peopleUnit;
            document.getElementById('mealTypeLabel').textContent = t.mealTypeLabel;
            document.getElementById('ingredientLabel').textContent = t.ingredientLabel;
            document.getElementById('generateBtn').textContent = t.generateBtn;
            document.getElementById('recipePlaceholder').textContent = t.recipePlaceholder;
            
            // æ›´æ–°ç¯ä¿å½±å“
            document.getElementById('impactTitle').textContent = t.impactTitle;
            document.getElementById('impactSubtitle').textContent = t.impactSubtitle;
            document.getElementById('foodWasteLabel').textContent = t.foodWasteLabel;
            document.getElementById('waterLabel').textContent = t.waterLabel;
            document.getElementById('co2Label').textContent = t.co2Label;
            document.getElementById('moneyLabel').textContent = t.moneyLabel;
            document.getElementById('impactNote').textContent = t.impactNote;
            
            // æ›´æ–°å¨ä½™å»ºè®®
            document.getElementById('tipsTitle').textContent = t.tipsTitle;
            document.getElementById('tipsSubtitle').textContent = t.tipsSubtitle;
            document.getElementById('tip1Title').textContent = t.tip1Title;
            document.getElementById('tip1Text').textContent = t.tip1Text;
            document.getElementById('tip2Title').textContent = t.tip2Title;
            document.getElementById('tip2Text').textContent = t.tip2Text;
            document.getElementById('tip3Title').textContent = t.tip3Title;
            document.getElementById('tip3Text').textContent = t.tip3Text;
            
            // æ›´æ–°æ’è¡Œæ¦œé¡µé¢
            document.getElementById('leaderboardTitle').textContent = t.leaderboardTitle;
            document.getElementById('leaderboardSubtitle').textContent = t.leaderboardSubtitle;
            document.getElementById('leaderboardTitle2').textContent = t.leaderboardTitle2;
            document.getElementById('leaderboardDescription').textContent = t.leaderboardDescription;
            document.getElementById('yourRankTitle').textContent = t.yourRankTitle;
            document.getElementById('yourRankText').textContent = t.yourRankText;
            document.getElementById('howToJoinTitle').textContent = t.howToJoinTitle;
            
            // æ›´æ–°é¡µè„š
            document.getElementById('footerText').textContent = t.footerText;
            
            // æ›´æ–°é¤ç‚¹ç±»å‹å’Œé£Ÿæé€‰é¡¹
            updateSelectOptions(lang);
            
            // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
            updateLeaderboard();
        }
        
        // æ›´æ–°ä¸‹æ‹‰é€‰é¡¹çš„å¤šè¯­è¨€
        function updateSelectOptions(lang) {
            const mealTypeSelect = document.getElementById('mealType');
            const ingredientSelect = document.getElementById('ingredientSelect');
            
            if (lang === 'zh') {
                // æ›´æ–°ç”¨é¤ç±»å‹é€‰é¡¹
                mealTypeSelect.innerHTML = `
                    <option value="homecooking">å®¶å¸¸èœ</option>
                    <option value="healthy">å¥åº·å‡è„‚é¤</option>
                    <option value="vegetarian">ç´ é£Ÿ</option>
                    <option value="feast">å®´å®¢èœ</option>
                `;
                
                // æ›´æ–°é£Ÿæé€‰é¡¹
                ingredientSelect.innerHTML = `
                    <option value="tomato">ç•ªèŒ„</option>
                    <option value="chicken">é¸¡èƒ¸è‚‰</option>
                    <option value="potato">åœŸè±†</option>
                    <option value="egg">é¸¡è›‹</option>
                    <option value="beef">ç‰›è‚‰</option>
                    <option value="fish">é±¼</option>
                `;
            } else {
                // æ›´æ–°ç”¨é¤ç±»å‹é€‰é¡¹
                mealTypeSelect.innerHTML = `
                    <option value="homecooking">Home Cooking</option>
                    <option value="healthy">Healthy Meal</option>
                    <option value="vegetarian">Vegetarian</option>
                    <option value="feast">Feast Dish</option>
                `;
                
                // æ›´æ–°é£Ÿæé€‰é¡¹
                ingredientSelect.innerHTML = `
                    <option value="tomato">Tomato</option>
                    <option value="chicken">Chicken Breast</option>
                    <option value="potato">Potato</option>
                    <option value="egg">Eggs</option>
                    <option value="beef">Beef</option>
                    <option value="fish">Fish</option>
                `;
            }
        }
        
        // é¡µé¢åˆ‡æ¢åŠŸèƒ½
        document.querySelectorAll('.page-btn').forEach(button => {
            button.addEventListener('click', function() {
                const pageId = this.getAttribute('data-page');
                
                // éšè—æ‰€æœ‰é¡µé¢
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active');
                });
                
                // æ˜¾ç¤ºç›®æ ‡é¡µé¢
                document.getElementById(pageId).classList.add('active');
                
                // å¦‚æœæ˜¯æ’è¡Œæ¦œé¡µé¢ï¼Œæ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
                if (pageId === 'leaderboard') {
                    updateLeaderboard();
                }
            });
        });

        // é£Ÿè°±æ•°æ®åº“
        const recipes = {
            tomato: {
                name: { zh: "ç•ªèŒ„ç‚’è›‹", en: "Tomato Egg Stir-fry" },
                baseForPeople: 2,
                ingredients: [
                    { name: { zh: "ç•ªèŒ„", en: "Tomato" }, amount: 300, unit: "g" },
                    { name: { zh: "é¸¡è›‹", en: "Eggs" }, amount: 4, unit: "" },
                    { name: { zh: "é£Ÿç”¨æ²¹", en: "Oil" }, amount: 15, unit: "ml" },
                    { name: { zh: "ç›", en: "Salt" }, amount: 3, unit: "g" },
                    { name: { zh: "ç³–", en: "Sugar" }, amount: 5, unit: "g" }
                ],
                steps: [
                    { zh: "ç•ªèŒ„æ´—å‡€åˆ‡å—ï¼Œé¸¡è›‹æ‰“æ•£å¤‡ç”¨", en: "Wash and cut tomatoes into wedges, beat eggs in a bowl" },
                    { zh: "çƒ­é”…å€’æ²¹ï¼Œå…ˆç‚’é¸¡è›‹è‡³å‡å›ºï¼Œç››å‡ºå¤‡ç”¨", en: "Heat oil, scramble eggs until set, set aside" },
                    { zh: "é”…ä¸­å†åŠ å°‘è®¸æ²¹ï¼Œæ”¾å…¥ç•ªèŒ„å—ç¿»ç‚’è‡³å‡ºæ±", en: "Add more oil, stir-fry tomatoes until soft and juicy" },
                    { zh: "åŠ å…¥ç‚’å¥½çš„é¸¡è›‹ï¼ŒåŠ ç›å’Œç³–è°ƒå‘³ï¼Œç¿»ç‚’å‡åŒ€", en: "Add scrambled eggs back, season with salt and sugar, mix well" }
                ]
            },
            chicken: {
                name: { zh: "é¦™ç…é¸¡èƒ¸", en: "Pan-fried Chicken Breast" },
                baseForPeople: 2,
                ingredients: [
                    { name: { zh: "é¸¡èƒ¸è‚‰", en: "Chicken Breast" }, amount: 300, unit: "g" },
                    { name: { zh: "æ©„æ¦„æ²¹", en: "Olive Oil" }, amount: 10, unit: "ml" },
                    { name: { zh: "ç›", en: "Salt" }, amount: 5, unit: "g" },
                    { name: { zh: "é»‘èƒ¡æ¤’", en: "Black Pepper" }, amount: 2, unit: "g" }
                ],
                steps: [
                    { zh: "é¸¡èƒ¸è‚‰ç”¨ç›å’Œé»‘èƒ¡æ¤’è…Œåˆ¶10åˆ†é’Ÿ", en: "Marinate chicken breast with salt and black pepper for 10 minutes" },
                    { zh: "å¹³åº•é”…åŠ çƒ­æ©„æ¦„æ²¹", en: "Heat olive oil in a pan" },
                    { zh: "æ”¾å…¥é¸¡èƒ¸è‚‰ï¼Œæ¯é¢ç…4-5åˆ†é’Ÿè‡³é‡‘é»„", en: "Add chicken breast, cook 4-5 minutes per side until golden" },
                    { zh: "åˆ‡ç‰‡è£…ç›˜å³å¯", en: "Slice and serve" }
                ]
            },
            potato: {
                name: { zh: "åœŸè±†æ³¥", en: "Mashed Potatoes" },
                baseForPeople: 2,
                ingredients: [
                    { name: { zh: "åœŸè±†", en: "Potatoes" }, amount: 500, unit: "g" },
                    { name: { zh: "é»„æ²¹", en: "Butter" }, amount: 30, unit: "g" },
                    { name: { zh: "ç‰›å¥¶", en: "Milk" }, amount: 50, unit: "ml" },
                    { name: { zh: "ç›", en: "Salt" }, amount: 5, unit: "g" }
                ],
                steps: [
                    { zh: "åœŸè±†å»çš®åˆ‡å—ï¼Œæ”¾å…¥é”…ä¸­åŠ æ°´ç…®15-20åˆ†é’Ÿ", en: "Peel and cube potatoes, boil in water for 15-20 minutes" },
                    { zh: "ç…®è‡³åœŸè±†è½¯çƒ‚ï¼Œæ²¥å¹²æ°´åˆ†", en: "Cook until soft, drain water" },
                    { zh: "åŠ å…¥é»„æ²¹ã€ç‰›å¥¶å’Œç›", en: "Add butter, milk and salt" },
                    { zh: "ç”¨å‰å­æˆ–å‹æ³¥å™¨å‹æˆæ³¥çŠ¶ï¼Œæ…æ‹Œå‡åŒ€", en: "Mash with fork or masher, mix well" }
                ]
            }
        };

        // æ’è¡Œæ¦œæ•°æ®å­˜å‚¨
        let leaderboardData = JSON.parse(localStorage.getItem('foodguardian_leaderboard')) || [];
        
        // ä¿å­˜æ’è¡Œæ¦œæ•°æ®
        function saveLeaderboardData() {
            localStorage.setItem('foodguardian_leaderboard', JSON.stringify(leaderboardData));
        }

        // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
        function updateLeaderboard() {
            const leaderboardList = document.getElementById('leaderboardList');
            leaderboardList.innerHTML = '';
            
            // æŒ‰æµªè´¹é‡ä»å°‘åˆ°å¤šæ’åºï¼ˆæµªè´¹æœ€å°‘æ’ç¬¬ä¸€ï¼‰
            const sortedData = [...leaderboardData].sort((a, b) => a.wasteReduced - b.wasteReduced);
            
            // åªæ˜¾ç¤ºå‰6å
            const top6 = sortedData.slice(0, 6);
            
            if (top6.length === 0) {
                leaderboardList.innerHTML = `<p style="text-align: center; color: #666;">${currentLanguage === 'zh' ? 'æš‚æ— æ’è¡Œæ¦œæ•°æ®ï¼Œè¯·å…ˆç”Ÿæˆé£Ÿè°±' : 'No leaderboard data yet, please generate a recipe first'}</p>`;
                document.getElementById('yourRankText').textContent = currentLanguage === 'zh' ? 'æ‚¨è¿˜æœªç”Ÿæˆé£Ÿè°±ï¼Œè¯·å…ˆä½¿ç”¨æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨' : 'You have not generated a recipe yet, please use the Smart Recipe Generator first';
                return;
            }
            
            top6.forEach((user, index) => {
                const rankClass = `rank rank-${index + 1}`;
                const rankText = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : index + 1;
                
                const wasteText = currentLanguage === 'zh' ? 'å‡å°‘æµªè´¹' : 'Waste Reduced';
                
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                item.innerHTML = `
                    <div class="${rankClass}">${rankText}</div>
                    <div class="user-info">
                        <div class="user-name">${user.name}</div>
                        <div>${wasteText}: <span class="waste-amount">${user.wasteReduced}g</span></div>
                        <div class="timestamp">${user.timestamp}</div>
                    </div>
                `;
                leaderboardList.appendChild(item);
            });
            
            // æ›´æ–°ç”¨æˆ·æ’åä¿¡æ¯
            if (currentUser) {
                const userRank = getUserRank(currentUser);
                if (userRank <= leaderboardData.length) {
                    const rankText = currentLanguage === 'zh' ? 
                        `${currentUser}ï¼Œæ‚¨å½“å‰æ’å: ç¬¬${userRank}åï¼ˆå…±${leaderboardData.length}äººï¼‰` :
                        `${currentUser}, your current rank: ${userRank} (out of ${leaderboardData.length} people)`;
                    document.getElementById('yourRankText').textContent = rankText;
                } else {
                    document.getElementById('yourRankText').textContent = currentLanguage === 'zh' ? 
                        'æ‚¨è¿˜æœªç”Ÿæˆé£Ÿè°±ï¼Œè¯·å…ˆä½¿ç”¨æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå™¨' : 
                        'You have not generated a recipe yet, please use the Smart Recipe Generator first';
                }
            }
        }

        // è·å–ç”¨æˆ·æ’å
        function getUserRank(username) {
            const sortedData = [...leaderboardData].sort((a, b) => a.wasteReduced - b.wasteReduced);
            const userIndex = sortedData.findIndex(user => user.name === username);
            return userIndex !== -1 ? userIndex + 1 : leaderboardData.length + 1;
        }

        // æ·»åŠ ç”¨æˆ·åˆ°æ’è¡Œæ¦œ
        function addToLeaderboard(username, wasteReduced) {
            // è·å–å½“å‰æ—¶é—´
            const now = new Date();
            const timestamp = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            // æŸ¥æ‰¾æ˜¯å¦å·²å­˜åœ¨è¯¥ç”¨æˆ·
            const existingUserIndex = leaderboardData.findIndex(user => user.name === username);
            
            if (existingUserIndex !== -1) {
                // æ›´æ–°ç°æœ‰ç”¨æˆ·ï¼ˆåªä¿ç•™æ›´å¥½çš„æˆç»©ï¼‰
                if (wasteReduced < leaderboardData[existingUserIndex].wasteReduced) {
                    leaderboardData[existingUserIndex].wasteReduced = wasteReduced;
                    leaderboardData[existingUserIndex].timestamp = timestamp;
                }
            } else {
                // æ·»åŠ æ–°ç”¨æˆ·
                leaderboardData.push({ 
                    name: username, 
                    wasteReduced: wasteReduced,
                    timestamp: timestamp
                });
            }
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveLeaderboardData();
            
            // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
            updateLeaderboard();
            
            return existingUserIndex !== -1;
        }

        // æ›´æ–°ç¯ä¿å½±å“æ˜¾ç¤º
        function updateEnvironmentalImpact(people, ingredient) {
            const ingredientFactors = { 
                tomato: 50, 
                chicken: 60, 
                potato: 40, 
                egg: 45, 
                beef: 70, 
                fish: 65 
            };
            
            const wasteFactor = ingredientFactors[ingredient] || 50;
            const wasteSaved = people * wasteFactor;
            const waterSaved = wasteSaved * 5;
            const co2Saved = wasteSaved * 0.5;
            const moneySaved = wasteSaved * 0.02;
            
            document.getElementById('savedFood').textContent = wasteSaved + 'g';
            document.getElementById('savedWater').textContent = waterSaved + 'L';
            document.getElementById('savedCO2').textContent = co2Saved + 'g';
            document.getElementById('savedMoney').textContent = 'Â¥' + moneySaved.toFixed(0);
            
            return wasteSaved;
        }

        // ç”Ÿæˆé£Ÿè°±
        function generateRecipe() {
            if (!currentUser) {
                alert(currentLanguage === 'zh' ? 'è¯·å…ˆè¾“å…¥æ‚¨çš„æ˜µç§°ï¼' : 'Please enter your nickname first!');
                return;
            }
            
            const people = parseInt(document.getElementById('peopleSlider').value);
            const ingredient = document.getElementById('ingredientSelect').value;
            const recipe = recipes[ingredient] || recipes.tomato;
            
            const resultDiv = document.getElementById('recipeResult');
            
            // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
            const loadingText = currentLanguage === 'zh' ? 
                `æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆ${people}äººä»½çš„å®Œç¾é£Ÿè°±...` : 
                `Generating perfect recipe for ${people} ${people === 1 ? 'person' : 'people'}...`;
            
            resultDiv.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <div class="spinner"></div>
                    <p style="margin-top: 1rem; color: var(--warm-orange);">
                        ${loadingText}
                    </p>
                </div>
            `;
            
            // æ¨¡æ‹ŸAIå¤„ç†
            setTimeout(() => {
                const scale = people / recipe.baseForPeople;
                const wasteSaved = updateEnvironmentalImpact(people, ingredient);
                
                // æ·»åŠ åˆ°æ’è¡Œæ¦œ
                const isExistingUser = addToLeaderboard(currentUser, wasteSaved);
                
                const recipeName = recipe.name[currentLanguage];
                const successMessage = currentLanguage === 'zh' ? 
                    `æ‚¨çš„é£Ÿè°±å·²${isExistingUser ? 'æ›´æ–°åˆ°' : 'æ·»åŠ åˆ°'}æ’è¡Œæ¦œã€‚æ‚¨å‡å°‘äº† <strong>${wasteSaved}g</strong> é£Ÿç‰©æµªè´¹ï¼` :
                    `Your recipe has been ${isExistingUser ? 'updated to' : 'added to'} the leaderboard. You reduced <strong>${wasteSaved}g</strong> of food waste!`;
                const viewLeaderboardText = currentLanguage === 'zh' ? 'æŸ¥çœ‹æ’è¡Œæ¦œ' : 'View Leaderboard';
                
                resultDiv.innerHTML = `
                    <div>
                        <h3>${recipeName}</h3>
                        <p>${currentLanguage === 'zh' ? 'é€‚åˆ' : 'Perfect for'} ${people} ${currentLanguage === 'zh' ? 'äºº' : (people === 1 ? 'person' : 'people')}</p>
                        
                        <h4 style="margin-top: 1.5rem;">${currentLanguage === 'zh' ? 'é£Ÿææ¸…å•' : 'Ingredients'}</h4>
                        <div class="result-card">
                            ${recipe.ingredients.map(ing => {
                                const scaledAmount = Math.round(ing.amount * scale);
                                return `
                                    <div class="ingredient-item">
                                        <span>${ing.name[currentLanguage]}</span>
                                        <span style="font-weight: bold; color: var(--fresh-green);">
                                            ${scaledAmount} ${ing.unit}
                                        </span>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        
                        <h4 style="margin-top: 1.5rem;">${currentLanguage === 'zh' ? 'åˆ¶ä½œæ­¥éª¤' : 'Instructions'}</h4>
                        <div class="result-card">
                            <ol style="margin-left: 1.5rem;">
                                ${recipe.steps.map(step => `
                                    <li style="margin-bottom: 0.5rem;">${step[currentLanguage]}</li>
                                `).join('')}
                            </ol>
                        </div>
                        
                        <div class="result-card" style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); margin-top: 1.5rem;">
                            <h4 style="color: #065f46;">ğŸ‰ ${currentLanguage === 'zh' ? 'æ­å–œï¼æ‚¨å·²æˆåŠŸå‡å°‘æµªè´¹' : 'Congratulations! You have successfully reduced waste'}</h4>
                            <p style="margin-top: 0.5rem;">
                                ${successMessage}
                            </p>
                            <p style="margin-top: 0.5rem;">
                                <button class="btn" onclick="switchToLeaderboard()" style="margin-top: 0.5rem;">${viewLeaderboardText}</button>
                            </p>
                        </div>
                    </div>
                `;
                
                // æ›´æ–°ç”¨æˆ·æ’åä¿¡æ¯
                updateLeaderboard();
            }, 1500);
        }

        // åˆ‡æ¢åˆ°æ’è¡Œæ¦œé¡µé¢
        function switchToLeaderboard() {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // æ˜¾ç¤ºæ’è¡Œæ¦œé¡µé¢
            document.getElementById('leaderboard').classList.add('active');
            
            // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
            updateLeaderboard();
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        function initializeEventListeners() {
            // äººæ•°æ»‘å—
            const peopleSlider = document.getElementById('peopleSlider');
            const peopleValue = document.getElementById('peopleValue');
            
            if (peopleSlider && peopleValue) {
                peopleSlider.addEventListener('input', function() {
                    const people = this.value;
                    peopleValue.textContent = people;
                    const ingredient = document.getElementById('ingredientSelect').value;
                    updateEnvironmentalImpact(people, ingredient);
                });
                
                // é£Ÿæé€‰æ‹©å˜åŒ–
                document.getElementById('ingredientSelect').addEventListener('change', function() {
                    const people = parseInt(peopleSlider.value);
                    updateEnvironmentalImpact(people, this.value);
                });
            }
            
            // ç”¨æˆ·åè¾“å…¥æ¡†å›è½¦é”®æ”¯æŒ
            const usernameInput = document.getElementById('usernameInput');
            if (usernameInput) {
                usernameInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        registerUser();
                    }
                });
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', function() {
            // åˆå§‹åŒ–è¯­è¨€åˆ‡æ¢å™¨
            initializeLanguageSwitcher();
            
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
            initializeEventListeners();
            
            // æ£€æŸ¥æ˜¯å¦æœ‰å·²ç™»å½•çš„ç”¨æˆ·
            checkUser();
            
            // å¦‚æœæ²¡æœ‰ç”¨æˆ·ï¼Œèšç„¦åˆ°ç”¨æˆ·åè¾“å…¥æ¡†
            if (!currentUser) {
                const usernameInput = document.getElementById('usernameInput');
                if (usernameInput) {
                    usernameInput.focus();
                }
            }
        });
    </script>
</body>
</html>
